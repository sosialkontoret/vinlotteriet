<div class="large-background-deprecated">
  <div class="edit-lottery">
    <div class="container">
      <h1>{{lottery?.name}}</h1>
      <p>{{lottery?.description}}</p>
      <div class="row">
        <div class="col-md-4">
          <h4>Trekningen kan begynne:</h4>
          <p>{{lottery?.dateTime.toDate() | date: 'dd-MM-yyyy HH:mm' }}</p>
        </div>
        <div class="col-md-4">
          <h4>Lotteriet ble laget:</h4>
          <p>{{lottery?.createdDate.toDate() | date: 'dd-MM-yyyy HH:mm' }}</p>
        </div>
        <div class="col-md-4">
          <h4>Antall trekninger:</h4>
          <p>{{lottery?.numberOfDraws}}</p>
        </div>
      </div>
      <div *ngIf="!countdownFinished" class="row">
        <div class="col-md-4">
          Trekningen begynner om:
        </div>
        <div class="col-md-8">
          <sk-countdown *ngIf="lottery?.dateTime" (countDownFinished)="setCountdownFinished($event)" [eventDate]="lottery?.dateTime.toDate()"></sk-countdown>
        </div>
      </div>

      <div *ngIf="countdownFinished && numberOfDrawsDone <= lottery?.numberOfDraws" class="start-lottery">
        <button  *ngIf="!lotteryOngoing" (click)="onStartLottery()" class="animated lightSpeedIn start-lottery-button">Start Lotteri!</button>
        <button disabled *ngIf="lotteryOngoing" (click)="onStartLottery()" class="start-lottery-button disabled">Trekning p친g친r!</button>
        <p>Dersom det gjenst친r flere trekninger kan flere detalkere legges til.</p>
      </div>

      <div *ngIf="numberOfDrawsDone >= lottery?.numberOfDraws">
        <div *ngFor="let draw of lottery?.draws">
          <h3>游끥 Winners 游끥</h3>
          <p>{{draw.winner}}</p>
        </div>
      </div>

      <h3>Legg til deltakgere:</h3>
      <form class="row" (ngSubmit)="addParticipant(newParticipantForm.value, newParticipantForm.valid)" [formGroup]="newParticipantForm">
        <div class="form-element col-md-4">
          <label>Navn:</label>
          <input type="text" placeholder="Navn" formControlName="name">
          <div class="error-deprecated"><span *ngIf="name.invalid && (name.dirty || name.touched)" translate>Navn p친krevd</span></div>
        </div>
        <div class="form-element col-md-4">
          <label>Antall lodd:</label>
          <input type="number" placeholder="Antall" formControlName="numberOfTickets">
          <div class="error-deprecated"><span *ngIf="numberOfTickets.invalid && (numberOfTickets.dirty || numberOfTickets.touched)" translate>Antall lodd m친 v칝re mellom 0-100</span></div>
        </div>
        <div class="form-element col-md-4">
          <button class="small-button green-background" type="submit">
            <span *ngIf="isLoading"><i class="fa fa-cog fa-spin"></i></span>
            <span *ngIf="!isLoading">Legg til</span>
          </button>
          <span class="error-deprecated" *ngIf="addParticipantError">{{addParticipantError}}</span>
        </div>
      </form>

      <div class="participants">
        <h3>Deltakere</h3>
        <div class="row">
          <div class="col-8 header">Navn</div>
          <div class="col-2 header">Antall lodd</div>
          <div class="col-2 header"></div>
        </div>
        <div class="participant-list">
          <div class="row" *ngFor="let participants of lottery?.participants; let i = index">
            <div class="col additonal-padding col-8">{{participants.name}}</div>
            <div class="col additonal-padding col-2">{{participants.numberOfTickets}}</div>
            <div class="col col-2"><button class="delete" (click)="deleteParticipant(participants.name, i)"><i class="fa fa-trash-o"></i> </button></div>
          </div>
        </div>

      </div>
    </div>


  </div>

</div>
